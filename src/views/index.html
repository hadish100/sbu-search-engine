<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>موتور جست‌و‌جوی بهشتی</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazirmatn@v33.003/Vazirmatn-font-face.css" rel="stylesheet" type="text/css" />
    <meta name="author" content="hadish">

    <style>

      :root
      {
        --c1:#ececf4;
        --c2:#6b6e89
      }

      *
      {
        font-family:Vazirmatn;
      }

      body
      {
        background:var(--c1);
        border:0;
        padding:0;
        margin:0;
        width:100%;
        height:100vh;
      }

      .page_continer
      {
        height:80%;
        display:flex;
        justify-content:center;
        align-items:center;
        align-content:center;
        flex-direction:column;
      }

      .page_title
      {
        font-size:30px;
      }

      .search_container
      {
        margin-top:30px;
        display:flex;
        justify-content:center;
        align-items:center;
        align-content:center;
        flex-direction:row-reverse;
        position:relative;
      }

      .search_container > input
      {
        border-radius:50px;
        height:35px;
        width:300px;
        text-align:right;
        font-size:18px;
        border:0;
        outline:0;
        box-shadow: black 0 4px 7px -6px;
        padding-right:10px;
      }

      .search_container > svg
      {
        position:absolute;
        left:5px;
      }

      .search_result_container
      {
        margin-top:20px;
        display:flex;
        justify-content:center;
        align-items:center;
        align-content:center;
        flex-direction:column;
        width:300px;
      }

      .search_result
      {
        width:100%;
        height:30px;
        display:flex;
        justify-content:space-between;
        align-items:center;
        align-content:center;
        flex-direction:row-reverse;
        background:white;
        margin: 5px;
        border-radius: 5px;
        transition: all 0.2s;
        opacity:1;
        box-shadow:black 4px 4px 7px -7px;
      }

      .search_result_name
      {
        margin-right:7px;
      }

      .search_result_id
      {
        margin-left:7px;
      }

      .empty_search_result
      {
        opacity:0 !important;
      }

    </style>

  </head>
  <body>

    <div class="page_continer">
    <div class="page_title">
      موتور جست‌و‌جوی بهشتی
    </div>

    <div class="search_container">
      <input type="text" id="search" placeholder="جست‌و‌جوی دانشجو">
      <svg width="35px" height="35px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <g clip-path="url(#clip0_15_152)">
        <circle cx="10.5" cy="10.5" r="6.5" stroke="#6b6e89" stroke-linejoin="round"/>
        <path d="M19.6464 20.3536C19.8417 20.5488 20.1583 20.5488 20.3536 20.3536C20.5488 20.1583 20.5488 19.8417 20.3536 19.6464L19.6464 20.3536ZM20.3536 19.6464L15.3536 14.6464L14.6464 15.3536L19.6464 20.3536L20.3536 19.6464Z" fill="#6b6e89"/>
        </g>
        <defs>
        <clipPath id="clip0_15_152">
        <rect width="24" height="24" fill="white"/>
        </clipPath>
        </defs>
      </svg>
    </div>

    <div class="search_result_container">
      <div class="search_result empty_search_result"><div class="search_result_name"></div><div class="search_result_id"></div></div>
      <div class="search_result empty_search_result"><div class="search_result_name"></div><div class="search_result_id"></div></div>
      <div class="search_result empty_search_result"><div class="search_result_name"></div><div class="search_result_id"></div></div>
      <div class="search_result empty_search_result"><div class="search_result_name"></div><div class="search_result_id"></div></div>
      <div class="search_result empty_search_result"><div class="search_result_name"></div><div class="search_result_id"></div></div>
    </div>
  </div>


  </body>


  <script>

    async function search_student(search)
    {

      if(search.length < 2)
      {
        for(var i = 0; i < 5; i++) set_result_row_content(i,null);
        return;
      }

      var students = 
      [
        {
          "name":"پویا همراز",
          "student_id":"401243097",
        },
        {
          "name":"آراس ولی زاده",
          "student_id":"401243095",
        },
        {
          "name": "میلاد انصاری",
          "student_id": "401243104",
        },
        {
          "name": "احمد باقری",
          "student_id": "401243034",
        },
        {
          "name": "محمدحسین بمانی ",
          "student_id": "401243035",
        },
        {
          "name": "علی بیرامی",
          "student_id": "401243037",
        },
        {
          "name": "ریحانه تقوی",
          "student_id": "401243040",
        },
        {
          "name": "نیلا چناری",
          "student_id": "401243110",
        },
        {
          "name": "فرزین حاج غلامرضایی",
          "student_id": "401243041",
        },
        {
          "name": "طه حسین پور",
          "student_id": "401243043",
        },
        {
          "name": "میثم حکمی",
          "student_id": "401243044",
        },
        {
          "name": "محدثه حکیمی ",
          "student_id": "401243045",
        },
        {
          "name": "نسترن خالقی",
          "student_id": "401243046",
        },
        {
          "name": "احسان خان بابایی",
          "student_id": "401243047",
        },
        {
          "name": "میلاد خدابنده لو",
          "student_id": "401243048",
        },
        { 
          "name": "سهیل خرم",
          "student_id": "401243049",
        },
        {
          "name": "حمیدرضا درویشی ",
          "student_id": "401243050",
        },
        {
          "name": "مهدی رضایی",
          "student_id": "401243129",
        },
        {
          "name": "ابتین زمانی",
          "student_id": "401243105",
        },
        {
          "name": "علیرضا سحری",
          "student_id": "401243057",
        },
        {
          "name": "مهرسا سمیع زاده",
          "student_id": "401243058",
        },
        {
          "name": "سینا سنجری نیا",
          "student_id": "401243059",
        },
        {
          "name": "اریا صدیق",
          "student_id": "401243064",
        },
        {
          "name": "سینا صمدی",
          "student_id": "401243065",
        },
        {
          "name": "شایان عبداللهی",
          "student_id": "401243067",
        },
        {
          "name": "هدی عطاری",
          "student_id": "401243068",
        },
        {
          "name": "قائم علی ابادی",
          "student_id": "401243069",
        },
        {
          "name": "امیرحسین غفاریان",
          "student_id": "401243070",
        },
        {
          "name": "باربد کلیایی",
          "student_id": "401243106",
        },
        {
          "name": "ارمیتا کمری",
          "student_id": "401243076",
        },
        {
          "name": "پارسا گلستانی ",
          "student_id": "401243077",
        },
        {
          "name": "آرین گنجی",
          "student_id": "401243127",
        },
        {
          "name": "ارین لطفی",
          "student_id": "401243078",
        },
        {
          "name": "برنا ماهرانی",
          "student_id": "401243079",
        },
        {
          "name": "محمدامین محمودی",
          "student_id": "401243082",
        },
        {
          "name": "علی مرادی",
          "student_id": "401243083",
        },
        {
          "name": "نیکا مستوری",
          "student_id": "401243084",
        },
        {
          "name": "حسین مصطفوی",
          "student_id": "401243085",
        },
        {
          "name": "صدرا موسوی",
          "student_id": "401243089",
        },
        {
          "name": "محمدجواد مهدی زاده",
          "student_id": "401243091",
        },
        {
          "name": "شایان میرزایی",
          "student_id": "401243092",
        },
        {
          "name": "رضا نصیری",
          "student_id": "401243101",
        },
        {
          "name": "امیرحسین یقطین",
          "student_id": "401243098",
        },
        {
          "name": "سمیرا احمدنژاد",
          "student_id": "401243026",
        },
        {
          "name": "فاطمه ازاد",
          "student_id": "401243027",
        },
        {
          "name": "ارمان اسدی",
          "student_id": "401243028",
        },
        {
          "name": "علیرضا اسماعیل زاده",
          "student_id": "401243029",
        },
        {
          "name": "امیرمهدی اقبالی",
          "student_id": "401243030",
        },
        {
          "name": "محمدصالح اله توکلی",
          "student_id": "401243031",
        },
        {
          "name": "مانی حاتم آبادی",
          "student_id": "401243102",
        },
        {
          "name": "محمدجواد حرمتی",
          "student_id": "401243042",
        },
        {
          "name": "مھدی رییس ابراهیمی",
          "student_id": "401243051",
        },
        {
          "name": "محمدعرفان ربانی",
          "student_id": "401243052",
        },
        {
          "name": "امیرسامان رستم بیگی",
          "student_id": "401243053",
        },
        {
          "name": "کیمیا روحانی فر",
          "student_id": "401243054",
        },
        {
          "name": "مهدی زینالی",
          "student_id": "401243055",
        },
        {
          "name": "امیرحسین زینلی",
          "student_id": "401243056",
        },
        {
          "name": "آرمیتا سجادی فر",
          "student_id": "401243128",
        },
        {
          "name": "سحر شاه رجبیان",
          "student_id": "401243060",
        },
        {
          "name": "ارمان صادق پور",
          "student_id": "401243062",
        },
        {
          "name": "امیرحسین صدر",
          "student_id": "401243063",
        },
        {
          "name": "فاطمه طهماسبی ",
          "student_id": "401243066",
        },
        {
          "name": "محمدمهدی فلاح",
          "student_id": "401243071",
        },
        {
          "name": "امیر قائمی",
          "student_id": "401243103",
        },
        {
          "name": "پرهام قره باغی",
          "student_id": "401243072",
        },
        {
          "name": "امیرعلی قزوینیان",
          "student_id": "401243073",
        },
        {
          "name": "امیرحسین قنبری",
          "student_id": "401243119",
        },
        {
          "name": "محدثه کاملی",
          "student_id": "401243074",
        },
        {
          "name": "بردیا کریمی نیا",
          "student_id": "401243075",
        },
        {
          "name": "پرهام محمدخانی",
          "student_id": "401243080",
        },
        {
          "name": "محمدرضا محمدلو",
          "student_id": "401243081",
        },
        {
          "name": "مرصاد مستوفیان",
          "student_id": "401243124",
        },
        {
          "name": "امیرمحمد مظهری",
          "student_id": "401243086",
        },
        {
          "name": "هستی معینی",
          "student_id": "401243087",
        },
        {
          "name": "فاطمه منصوری",
          "student_id": "401243088",
        },
        {
          "name": "ساناز موسی پور",
          "student_id": "401243090",
        },
        {
          "name": "علیرضا نوری نسب",
          "student_id": "401243093",
        },
        {
          "name": "محسن وردی زاده",
          "student_id": "401243094",
        },
        {
          "name": "علی هاشمی زاده",
          "student_id": "401243096",
        },
        {
          "name": "امیرعلی مروجی",
          "student_id": "401243107",
        },
        {
          "name": "پارسا پورتوانا",
          "student_id": "401243038",
        },
        {
          "name": "علی پورسید",
          "student_id": "401243039",
        }
      ]

      var search_result = students.filter(student => student.name.includes(search) || student.student_id.includes(search));

      if(search_result.length > 5) search_result = search_result.slice(0,5);
      else search_result = search_result.concat(new Array(5 - search_result.length).fill(null));

      var search_result_container = document.querySelector(".search_result_container");


      for(var i = 0; i < search_result.length; i++)
      {
        if(search_result[i] == null)
        {
          set_result_row_content(i,null);
          continue;
        }

        var content = {
          name:search_result[i].name,
          student_id:farsify_string(search_result[i].student_id)
        };

        set_result_row_content(i,content);
      }
    }

    function farsify_string(str)
    {
      var farsi_digits = ["۰","۱","۲","۳","۴","۵","۶","۷","۸","۹"];
      return str.replace(/[0-9]/g, function(w){return farsi_digits[+w]});
    }

    function englishify_string(str)
    {
      var farsi_digits = ["۰","۱","۲","۳","۴","۵","۶","۷","۸","۹"];
      return str.replace(/[۰-۹]/g, function(w){return farsi_digits.indexOf(w)});
    }

    function set_result_row_content(row,content)
    {
      var row = document.querySelectorAll(".search_result")[row];
      if(content)
      {
        row.querySelector(".search_result_name").innerText = content.name;
        row.querySelector(".search_result_id").innerText = content.student_id;
      }
      if(content == null) row.classList.add("empty_search_result");
      else row.classList.remove("empty_search_result");
    }

    document.querySelector("#search").addEventListener("input", async function()
    {
      var search = this.value;
      this.value = farsify_string(search);
      search_student(englishify_string(search));
    });


  </script>

</html>